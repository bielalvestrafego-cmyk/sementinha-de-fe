---
const CTA_LINK = "#oferta";
---

<!-- Sticky bar: aparece ao scrollar para baixo -->
<div
  id="sticky-bar-v2"
  class="fixed top-0 left-0 z-50 w-full -translate-y-full bg-brown-dark/95 backdrop-blur-sm transition-transform duration-300"
>
  <div class="mx-auto flex max-w-2xl items-center justify-between gap-3 px-4 py-2.5 sm:px-6">
    <div class="min-w-0 flex-1">
      <p class="truncate text-sm font-semibold text-white sm:text-base">
        üî• <span class="text-cta">R$46,99</span> por tempo limitado
        <span class="hidden sm:inline">‚Äî 1.200 Par√°bolas + 6 B√¥nus GR√ÅTIS</span>
      </p>
    </div>
    <a
      href={CTA_LINK}
      class="shrink-0 rounded-xl bg-cta px-4 py-2 text-sm font-bold text-white uppercase shadow-[0_2px_10px_rgba(37,211,102,0.4)] transition-all hover:bg-cta-dark active:scale-95 sm:px-5 sm:text-sm"
    >
      QUERO AGORA!
    </a>
  </div>
</div>

<script>
  const stickyBar = document.getElementById('sticky-bar-v2');
  if (stickyBar) {
    let lastScrollY = 0;
    const triggerPoint = 600;

    function handleScroll() {
      const currentY = window.scrollY;
      if (currentY > triggerPoint) {
        stickyBar.classList.remove('-translate-y-full');
        stickyBar.classList.add('translate-y-0');
      } else {
        stickyBar.classList.add('-translate-y-full');
        stickyBar.classList.remove('translate-y-0');
      }
      lastScrollY = currentY;
    }

    let ticking = false;
    window.addEventListener('scroll', () => {
      if (!ticking) {
        window.requestAnimationFrame(() => {
          handleScroll();
          ticking = false;
        });
        ticking = true;
      }
    }, { passive: true });
  }
</script>
